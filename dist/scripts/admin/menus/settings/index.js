(()=>{let e;var t=globalThis,r={},o={},l=t.parcelRequire179d;null==l&&((l=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var l={id:e,exports:{}};return r[e]=l,t.call(l.exports,l,l.exports),l.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequire179d=l),(0,l.register)("ik5Sr",function(e,t){Object.defineProperty(e.exports,"default",{get:()=>r,set:void 0,enumerable:!0,configurable:!0});class r{constructor(){this.orderTable(),this.paginationTable()}orderTable(){let e=document.querySelectorAll(".order-table"),t=new URLSearchParams(window.location.search).get("order")||"DESC";e.forEach(e=>{let r=e.getAttribute("data-order");r&&e.addEventListener("click",()=>{t="ASC"===t?"DESC":"ASC",this.queryURL([{key:"orderby",value:r},{key:"order",value:t}])})})}paginationTable(){document.querySelectorAll(".pagination").forEach(e=>{let t=e.getAttribute("data-page");t&&e.addEventListener("click",()=>{this.queryURL([{key:"table-page",value:t}])})})}queryURL(e){let t=new URLSearchParams(window.location.search);e.forEach(({key:e,value:r})=>{t.delete(e),t.append(e,r)}),window.location.replace(`${location.origin+location.pathname}?${t.toString()}`)}}});var a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let d=new Uint8Array(16),n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));var c=function(t,r,o){if(a.randomUUID&&!r&&!t)return a.randomUUID();let l=(t=t||{}).random||(t.rng||function(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(d)})();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,r){o=o||0;for(let e=0;e<16;++e)r[o+e]=l[e];return r}return function(e,t=0){return n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]}(l)},i=l("ik5Sr");class u{constructor(){this.addPaymentLink(),this.editPaymentLink(),this.copyLink(),this.handlerToken(),this.handleModalProducts(),new i.default}handlerToken(){let e=document.querySelector("#generate-token");e&&e.addEventListener("click",()=>{this.generateToken()})}generateToken(){let e=document.querySelector("#token");e&&(e.value=c())}copyLink(){document.querySelectorAll(".copy-element").forEach(e=>{e.addEventListener("click",()=>{let t=e.getAttribute("data-copy");if(t)try{navigator.clipboard.writeText(t)}catch(r){let e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}})})}addPaymentLink(){document.querySelector("#add-payment-link").addEventListener("click",()=>{this.openModal(),this.generateToken()})}editPaymentLink(){let e=document.querySelectorAll(".open-link-form"),t=document.querySelector("#close-link-form");e.forEach(e=>{e.addEventListener("click",()=>{this.openModal(),this.fillModalFields(e.getAttribute("data-link"))})}),t.addEventListener("click",()=>{this.closeModal()})}openModal(){let e=document.querySelector("#link-form");this.clearModal(e),this.clearModalProducts(),e.classList.remove("hidden")}closeModal(){let e=document.querySelector("#link-form");this.clearModal(e),this.clearModalProducts(),e.classList.add("hidden")}clearModal(e){e&&(["name","token","expire_at","expire_hour","coupon","modal-link-title","hidden_link_id","link_url"].forEach(t=>{let r=e.querySelector(`#${t}`);switch(t){case"modal-link-title":r.classList.add("hidden");break;case"link_url":r.removeAttribute("href"),r.classList.add("hidden");break;default:r&&(r.value="")}}),["product-checkbox","product-number"].forEach(t=>{e.querySelectorAll(`.${t}`).forEach(e=>{e.value="","product-checkbox"===t&&(e.checked=!1)})}))}fillModalFields(e){let t=JSON.parse(e);if(t)for(let e in t){let r=document.querySelector(`#${e}`);switch(e){case"products":this.fillModalProducts(t[e]);break;case"link_id":r.innerText=`#${t[e]}`,r.parentElement.parentElement.classList.remove("hidden"),document.querySelector(`#hidden_${e}`).value=t[e];break;case"link_url":r.setAttribute("href",t[e]),r.classList.remove("hidden");break;default:r&&(r.value=t[e])}}}fillModalProducts(e){let t=document.querySelector("#product-list");t&&(t.value=JSON.stringify(e)),e.forEach(e=>{document.querySelectorAll(".modal-product").forEach(t=>{let r=t.querySelector(".product-checkbox"),o=t.querySelector(".product-number");parseInt(r.getAttribute("data-id"))===e.product&&(r.checked=!0,o.value=e.quantity)})})}clearModalProducts(){let e=document.querySelector("#product-list");e&&(e.value="")}handleModalProducts(){[document.querySelectorAll(".product-checkbox"),document.querySelectorAll(".product-number")].forEach(e=>{e.forEach(e=>{e.addEventListener("change",()=>{this.updateModalProducts()})})})}updateModalProducts(){let e=document.querySelectorAll(".modal-product"),t=[];e.forEach(e=>{let r=e.querySelector(".product-checkbox"),o=e.querySelector(".product-number");r?.checked?(o.value||(o.value=1),t.push({product:r.getAttribute("data-id"),quantity:o.value?o.value:0})):o.value="",r.addEventListener("change",()=>{r.checked||(o.value="")})});let r=document.querySelector("#product-list");r&&(r.value=JSON.stringify(t))}}document.addEventListener("DOMContentLoaded",()=>{new u})})();
//# sourceMappingURL=index.js.map
